function onYouTubePlayerAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}"object"!=typeof ytp&&(ytp={}),function(jQuery,ytp){if(ytp.isDevice="ontouchstart"in window,!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.msie=!1;var nAgt=navigator.userAgent;jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.fn.CSSAnimate=function(e,t,a,r,n){return this.each(function(){var i=jQuery(this);if(0!==i.length&&e){if("function"==typeof t&&(n=t,t=jQuery.fx.speeds._default),"function"==typeof a&&(n=a,a=0),"function"==typeof r&&(n=r,r="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof t)for(var o in jQuery.fx.speeds){if(t==o){t=jQuery.fx.speeds[o];break}t=null}if(jQuery.support.transition){var s="",l="transitionEnd";jQuery.browser.webkit?(s="-webkit-",l="webkitTransitionEnd"):jQuery.browser.mozilla?(s="-moz-",l="transitionend"):jQuery.browser.opera?(s="-o-",l="otransitionend"):jQuery.browser.msie&&(s="-ms-",l="msTransitionEnd"),o=[];for(c in e){var u=c;"transform"===u&&(u=s+"transform",e[u]=e[c],delete e[c]),"transform-origin"===u&&(u=s+"transform-origin",e[u]=e[c],delete e[c]),o.push(u),i.css(u)||i.css(u,0)}c=o.join(","),i.css(s+"transition-property",c),i.css(s+"transition-duration",t+"ms"),i.css(s+"transition-delay",a+"ms"),i.css(s+"transition-timing-function",r),i.css(s+"backface-visibility","hidden"),setTimeout(function(){i.css(e)},0),setTimeout(function(){i.called||!n?i.called=!1:n()},t+20),i.on(l,function(e){return i.off(l),i.css(s+"transition",""),e.stopPropagation(),"function"==typeof n&&(i.called=!0,n()),!1})}else{for(var c in e)"transform"===c&&delete e[c],"transform-origin"===c&&delete e[c],"auto"===e[c]&&delete e[c];n&&"string"!=typeof n||(n="linear"),i.animate(e,t,n)}}})},jQuery.fn.CSSAnimateStop=function(){var e="",t="transitionEnd";jQuery.browser.webkit?(e="-webkit-",t="webkitTransitionEnd"):jQuery.browser.mozilla?(e="-moz-",t="transitionend"):jQuery.browser.opera?(e="-o-",t="otransitionend"):jQuery.browser.msie&&(e="-ms-",t="msTransitionEnd"),jQuery(this).css(e+"transition",""),jQuery(this).off(t)},jQuery.support.transition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),function(c){c.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,t){this.defaults.type=e,this.defaults.name=t},get:function(b,f){var d=c.extend({},this.defaults,f);d.single.length||(d.single="metadata");var a=c.data(b,d.single);if(a)return a;if(a="{}","class"==d.type){var e=d.cre.exec(b.className);e&&(a=e[1])}else if("elem"==d.type){if(!b.getElementsByTagName)return;e=b.getElementsByTagName(d.name),e.length&&(a=c.trim(e[0].innerHTML))}else void 0!=b.getAttribute&&(e=b.getAttribute(d.name))&&(a=e);return 0>a.indexOf("{")&&(a="{"+a+"}"),a=eval("("+a+")"),c.data(b,d.single,a),a}}}),c.fn.metadata=function(e){return c.metadata.get(this[0],e)}}(jQuery),String.prototype.getVideoID=function(){var e;return e="http://youtu.be/"==this.substr(0,16)?this.replace("http://youtu.be/",""):this.indexOf("http")>-1?this.match(/[\\?&]v=([^&#]*)/)[1]:this},jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"2.6.0",author:"Matteo Bicocchi",defaults:{containment:"body",ratio:"16/9",showYTLogo:!1,videoURL:null,startAt:0,autoPlay:!0,vol:100,addRaster:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,printUrl:!0,stopMovieOnClick:!1,realfullscreen:!0,onReady:function(){},onStateChange:function(){},onPlaybackQualityChange:function(){},onError:function(){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},rasterImg:"images/raster.png",rasterImgRetina:"images/raster@2x.png",locationProtocol:"file:"!=location.protocol?location.protocol:"http:",buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer);YTPlayer.loop=0,YTPlayer.opt={};var property={};$YTPlayer.addClass("mb_YTVPlayer"),jQuery.metadata&&(jQuery.metadata.setType("class"),property=$YTPlayer.metadata()),jQuery.isEmptyObject(property)&&(property=$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property")),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property);var canGoFullscreen=!(jQuery.browser.msie||jQuery.browser.opera||self.location.href!=top.location.href);canGoFullscreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","id_"+(new Date).getTime()),YTPlayer.opt.id=YTPlayer.id,YTPlayer.isAlone=!1,YTPlayer.opt.isBgndMovie&&(YTPlayer.opt.containment="body"),YTPlayer.opt.isBgndMovie&&void 0!=YTPlayer.opt.isBgndMovie.mute&&(YTPlayer.opt.mute=YTPlayer.opt.isBgndMovie.mute),YTPlayer.opt.videoURL||(YTPlayer.opt.videoURL=$YTPlayer.attr("href"));var playerID="mbYTP_"+YTPlayer.id,videoID=this.opt.videoURL?this.opt.videoURL.getVideoID():$YTPlayer.attr("href")?$YTPlayer.attr("href").getVideoID():!1;YTPlayer.videoID=videoID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={autoplay:0,modestbranding:1,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations},canPlayHTML5=!1,v=document.createElement("video");v.canPlayType&&(canPlayHTML5=!0),canPlayHTML5&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1);var playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay");if(YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground="body"==YTPlayer.opt.containment.get(0).tagName.toLowerCase(),ytp.isDevice&&YTPlayer.isBackground)return void $YTPlayer.hide();if(YTPlayer.opt.addRaster){var retina=window.retina||window.devicePixelRatio>1;overlay.addClass(retina?"raster retina":"raster")}else overlay.removeClass("raster retina");var wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID);if(wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0}),playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden",opacity:this.opt.opacity}),wrapper.append(playerBox),!YTPlayer.isBackground||!ytp.isInit){if(YTPlayer.opt.containment.children().each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({position:"relative",minWidth:"100%",minHeight:"100%",zIndex:1,boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide(),YTPlayer.opt.containment.prepend(wrapper)):YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),ytp.isDevice||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){$YTPlayer.find(".mb_YTVPBar").addClass("visible")}).on("mouseleave",function(){$YTPlayer.find(".mb_YTVPBar").removeClass("visible")}),ytp.YTAPIReady)setTimeout(function(){jQuery(document).trigger("YTAPIReady")},200);else{var tag=document.createElement("script");tag.src=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/player_api",tag.id="YTAPI";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.isInit||YTPlayer.opt.isInit||(YTPlayer.isBackground&&YTPlayer.opt.stopMovieOnClick&&jQuery(document).off("mousedown.ytplayer").on("mousedown,.ytplayer",function(e){var t=jQuery(e.target);(t.is("a")||t.parents().is("a"))&&$YTPlayer.pauseYTP()}),YTPlayer.isBackground&&(ytp.isInit=!0),YTPlayer.opt.isInit=!0,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromFeed(YTPlayer.videoID,YTPlayer),jQuery(document).on("getVideoInfo_"+YTPlayer.opt.id,function(){return ytp.isDevice&&!YTPlayer.isBackground?void new YT.Player(playerID,{height:"100%",width:"100%",videoId:YTPlayer.videoID,events:{onReady:function(){$YTPlayer.optimizeDisplay(),playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1}),$YTPlayer.optimizeDisplay()},onStateChange:function(){}}}):void new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,YTPlayer.isReady||(YTPlayer.isReady=!0,YTPlayer.playerEl=YTPlayer.player.getIframe(),$YTPlayer.optimizeDisplay(),YTPlayer.videoID=videoID,jQuery(window).on("resize.YTP",function(){$YTPlayer.optimizeDisplay()}),YTPlayer.opt.showControls&&jQuery(YTPlayer).buildYTPControls(),YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),YTPlayer.opt.startAt>0&&YTPlayer.player.seekTo(parseFloat(YTPlayer.opt.startAt),!0),YTPlayer.opt.autoPlay?($YTPlayer.playYTP(),YTPlayer.player.setVolume(YTPlayer.opt.vol),YTPlayer.opt.mute?jQuery(YTPlayer).muteYTPVolume():jQuery(YTPlayer).unmuteYTPVolume()):(YTPlayer.player.pauseVideo(),YTPlayer.checkForStartAt=setInterval(function(){YTPlayer.player.getCurrentTime()>=YTPlayer.opt.startAt&&(clearInterval(YTPlayer.checkForStartAt),YTPlayer.opt.mute?jQuery(YTPlayer).muteYTPVolume():jQuery(YTPlayer).unmuteYTPVolume())},1)),"function"==typeof YTPlayer.opt.onReady&&YTPlayer.opt.onReady($YTPlayer),jQuery.mbYTPlayer.checkForState(YTPlayer))},onStateChange:function(e){if("function"==typeof e.target.getPlayerState){var t=e.target.getPlayerState();"function"==typeof YTPlayer.opt.onStateChange&&YTPlayer.opt.onStateChange($YTPlayer,t);var r=(jQuery(YTPlayer.playerEl),jQuery("#controlBar_"+YTPlayer.id)),n=YTPlayer.opt;if(0==t){if(YTPlayer.state==t)return;YTPlayer.state=t,YTPlayer.player.pauseVideo();var i=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1;n.loop?(YTPlayer.wrapper.css({opacity:0}),$YTPlayer.playYTP(),YTPlayer.player.seekTo(i,!0)):YTPlayer.isBackground||(YTPlayer.player.seekTo(i,!0),$YTPlayer.playYTP(),setTimeout(function(){$YTPlayer.pauseYTP()},10)),!n.loop&&YTPlayer.isBackground?YTPlayer.wrapper.CSSAnimate({opacity:0},2e3):n.loop&&(YTPlayer.wrapper.css({opacity:0}),YTPlayer.loop++),r.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPEnd")}if(3==t){if(YTPlayer.state==t)return;YTPlayer.state=t,r.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPBuffering")}if(-1==t){if(YTPlayer.state==t)return;YTPlayer.state=t,YTPlayer.wrapper.css({opacity:0}),jQuery(YTPlayer).trigger("YTPUnstarted")}if(1==t){if(YTPlayer.state==t)return;YTPlayer.state=t,YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),YTPlayer.opt.mute&&($YTPlayer.muteYTPVolume(),YTPlayer.opt.mute=!1),YTPlayer.opt.autoPlay&&0==YTPlayer.loop?YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity},2e3):YTPlayer.isBackground?setTimeout(function(){jQuery(YTPlayer.playerEl).CSSAnimate({opacity:1},2e3),YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},2e3)},1e3):(YTPlayer.wrapper.css({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity}),$YTPlayer.css({background:"rgba(0,0,0,0.5)"})),r.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.pause),jQuery(YTPlayer).trigger("YTPStart"),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.title||YTPlayer.videoID.toString()])}if(2==t){if(YTPlayer.state==t)return;YTPlayer.state=t,r.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPPause")}}},onPlaybackQualityChange:function(){"function"==typeof YTPlayer.opt.onPlaybackQualityChange&&YTPlayer.opt.onPlaybackQualityChange($YTPlayer)},onError:function(e){2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}})}))})}})},getDataFromFeed:function(e,t){t.videoID=e,jQuery.browser.msie?("auto"==t.opt.ratio?t.opt.ratio="16/9":t.opt.ratio,t.isInit||(t.isInit=!0,setTimeout(function(){jQuery(document).trigger("getVideoInfo_"+t.opt.id)},100)),jQuery(t).trigger("YTPChanged")):(jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//gdata.youtube.com/feeds/api/videos/"+e+"?v=2&alt=jsonc",function(e){t.dataReceived=!0;var n=e.data;if(t.title=n.title,t.videoData=n,"auto"==t.opt.ratio&&(t.opt.ratio=n.aspectRatio&&"widescreen"===n.aspectRatio?"16/9":"4/3"),!t.isInit){if(t.isInit=!0,!t.isBackground){var i=t.videoData.thumbnail.hqDefault;jQuery(t).css({background:"rgba(0,0,0,0.5) url("+i+") center center",backgroundSize:"cover"})}jQuery(document).trigger("getVideoInfo_"+t.opt.id)}jQuery(t).trigger("YTPChanged")}),setTimeout(function(){t.dataReceived||t.isInit||(t.isInit=!0,jQuery(document).trigger("getVideoInfo_"+t.opt.id))},2500))},getVideoID:function(){var e=this.get(0);return e.videoID||!1},setVideoQuality:function(e){var t=this.get(0);t.player.setPlaybackQuality(e)},YTPlaylist:function(e,t,a){var r=this.get(0);r.isPlayList=!0,t&&(e=jQuery.shuffle(e)),r.videoID||(r.videos=e,r.videoCounter=0,r.videoLength=e.length,jQuery(r).data("property",e[0]),jQuery(r).mb_YTPlayer()),"function"==typeof a&&jQuery(r).on("YTPChanged",function(){a(r)}),jQuery(r).on("YTPEnd",function(){jQuery(r).playNext()})},playNext:function(){var e=this.get(0);e.videoCounter++,e.videoCounter>=e.videoLength&&(e.videoCounter=0),jQuery(e.playerEl).css({opacity:0}),jQuery(e).changeMovie(e.videos[e.videoCounter])},playPrev:function(){var e=this.get(0);e.videoCounter--,e.videoCounter<=0&&(e.videoCounter=e.videoLength),jQuery(e.playerEl).css({opacity:0}),jQuery(e).changeMovie(e.videos[e.videoCounter])},changeMovie:function(e){var t=this.get(0),a=t.opt;e&&jQuery.extend(a,e),t.videoID=a.videoURL.getVideoID(),jQuery(t).pauseYTP();var r=jQuery.browser.msie?1e3:0;if(jQuery(t).getPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+t.videoID),5,t.opt.quality),setTimeout(function(){jQuery(t).playYTP(),jQuery(t).one("YTPStart",function(){jQuery(t.playerEl).CSSAnimate({opacity:1},2e3)})},r),t.opt.mute?jQuery(t).muteYTPVolume():jQuery(t).unmuteYTPVolume(),t.opt.addRaster){var n=window.retina||window.devicePixelRatio>1;t.overlay.addClass(n?"raster retina":"raster")}else t.overlay.removeClass("raster"),t.overlay.removeClass("retina");jQuery("#controlBar_"+t.id).remove(),t.opt.showControls&&jQuery(t).buildYTPControls(),jQuery.mbYTPlayer.getDataFromFeed(t.videoID,t),jQuery(t).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(t)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var e=this.get(0);ytp.YTAPIReady=!1,ytp.isInit=!1,e.opt.isInit=!1,e.videoID=null;var t=e.wrapper;t.remove(),jQuery("#controlBar_"+e.id).remove()},fullscreen:function(e){function o(e,t){for(var n,i,a=["webkit","moz","ms","o",""],r=0;r<a.length&&!e[n];){if(n=t,""==a[r]&&(n=n.substr(0,1).toLowerCase()+n.substr(1)),n=a[r]+n,i=typeof e[n],"undefined"!=i)return a=[a[r]],"function"==i?e[n]():e[n];r++}}function s(e){o(e,"RequestFullScreen")}function l(){(o(document,"FullScreen")||o(document,"IsFullScreen"))&&o(document,"CancelFullScreen")}var t=this.get(0),a=jQuery("#controlBar_"+t.id),r=a.find(".mb_OnlyYT"),n=jQuery(t.wrapper);if(e){var i=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange";jQuery(document).off(i),jQuery(document).on(i,function(){var e=o(document,"IsFullScreen")||o(document,"FullScreen");e?jQuery(t).setVideoQuality("default"):(jQuery(t).removeClass("fullscreen"),t.isAlone=!1,r.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(t).setVideoQuality(t.opt.quality),t.isBackground?jQuery("body").after(a):t.wrapper.before(a),jQuery(window).resize())})}t.isAlone?(e?l():n.CSSAnimate({opacity:t.opt.opacity},500),jQuery(t).trigger("YTPFullScreenEnd"),n.css({zIndex:-1}),r.html(jQuery.mbYTPlayer.controls.onlyYT),t.isAlone=!1):(1!=t.player.getPlayerState()&&2!=t.player.getPlayerState()&&jQuery(t).playYTP(),e?(t.wrapper.append(a),jQuery(t).addClass("fullscreen"),s(n.get(0))):n.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3,0),jQuery(t).trigger("YTPFullScreenStart"),r.html(jQuery.mbYTPlayer.controls.showSite),t.isAlone=!0)},playYTP:function(){var e=this.get(0),t=jQuery("#controlBar_"+e.id),a=t.find(".mb_YTVPPlaypause");a.html(jQuery.mbYTPlayer.controls.pause),e.player.playVideo(),e.wrapper.CSSAnimate({opacity:e.opt.opacity},2e3),jQuery(e).on("YTPStart",function(){jQuery(e).css("background","none")})},toggleLoops:function(){var e=this.get(0),t=e.opt;1==t.loop?t.loop=0:(t.startAt?e.player.seekTo(t.startAt):e.player.playVideo(),t.loop=1)},stopYTP:function(){var e=this.get(0),t=jQuery("#controlBar_"+e.id),a=t.find(".mb_YTVPPlaypause");a.html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo()},pauseYTP:function(){var e=this.get(0),a=(e.opt,jQuery("#controlBar_"+e.id)),r=a.find(".mb_YTVPPlaypause");r.html(jQuery.mbYTPlayer.controls.play),e.player.pauseVideo()},seekToYTP:function(e){var t=this.get(0);t.player.seekTo(e,!0)},setYTPVolume:function(e){var t=this.get(0);e||t.opt.vol||0!=player.getVolume()?!e&&t.player.getVolume()>0||e&&t.player.getVolume()==e?jQuery(t).muteYTPVolume():t.opt.vol=e:jQuery(t).unmuteYTPVolume(),t.player.setVolume(t.opt.vol)},muteYTPVolume:function(){var e=this.get(0);e.opt.vol=e.player.getVolume()||50,e.player.mute(),e.player.setVolume(0);var t=jQuery("#controlBar_"+e.id),a=t.find(".mb_YTVPMuteUnmute");a.html(jQuery.mbYTPlayer.controls.unmute)},unmuteYTPVolume:function(){var e=this.get(0);e.player.unMute(),e.player.setVolume(e.opt.vol);var t=jQuery("#controlBar_"+e.id),a=t.find(".mb_YTVPMuteUnmute");a.html(jQuery.mbYTPlayer.controls.mute)},manageYTPProgress:function(){var e=this.get(0),t=jQuery("#controlBar_"+e.id),a=t.find(".mb_YTVPProgress"),r=t.find(".mb_YTVPLoaded"),n=t.find(".mb_YTVTime"),i=a.outerWidth(),o=Math.floor(e.player.getCurrentTime()),s=Math.floor(e.player.getDuration()),l=o*i/s,u=0,c=100*e.player.getVideoLoadedFraction();return r.css({left:u,width:c+"%"}),n.css({left:0,width:l}),{totalTime:s,currentTime:o}},buildYTPControls:function(){var e=this.get(0),t=e.opt;if(!jQuery("#controlBar_"+e.id).length){var a=jQuery("<span/>").attr("id","controlBar_"+e.id).addClass("mb_YTVPBar").css({whiteSpace:"noWrap",position:e.isBackground?"fixed":"absolute",zIndex:e.isBackground?1e4:1e3}).hide(),r=jQuery("<div/>").addClass("buttonBar"),n=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTVPPlaypause ytpicon").click(function(){1==e.player.getPlayerState()?jQuery(e).pauseYTP():jQuery(e).playYTP()}),i=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTVPMuteUnmute ytpicon").click(function(){0==e.player.getVolume()?jQuery(e).unmuteYTPVolume():jQuery(e).muteYTPVolume()}),o=jQuery("<span/>").addClass("mb_YTVPTime"),s=t.videoURL;s.indexOf("http")<0&&(s=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+t.videoURL);var l=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTVPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(s,"viewOnYT")}),u=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(e).fullscreen(t.realfullscreen)}),c=jQuery("<div/>").addClass("mb_YTVPProgress").css("position","absolute").click(function(t){d.css({width:t.clientX-d.offset().left}),e.timeW=t.clientX-d.offset().left,a.find(".mb_YTVPLoaded").css({width:0});var r=Math.floor(e.player.getDuration());e.goto=d.outerWidth()*r/c.outerWidth(),e.player.seekTo(parseFloat(e.goto),!0),a.find(".mb_YTVPLoaded").css({width:0})}),f=jQuery("<div/>").addClass("mb_YTVPLoaded").css("position","absolute"),d=jQuery("<div/>").addClass("mb_YTVTime").css("position","absolute");c.append(f).append(d),r.append(n).append(i).append(o),t.printUrl&&r.append(l),(e.isBackground||e.opt.realfullscreen&&!e.isBackground)&&r.append(u),a.append(r).append(c),e.isBackground?jQuery("body").after(a):(a.addClass("inlinePlayer"),e.wrapper.before(a)),a.fadeIn()}},checkForState:function(e){var t=jQuery("#controlBar_"+e.id),a=e.opt,r=e.opt.startAt?e.opt.startAt:1;e.getState=setInterval(function(){var n=jQuery(e).manageYTPProgress();t.find(".mb_YTVPTime").html(jQuery.mbYTPlayer.formatTime(n.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(n.totalTime)),parseFloat(e.player.getDuration()-3)<e.player.getCurrentTime()&&1==e.player.getPlayerState()&&!e.isPlayList&&(a.loop?e.player.seekTo(r):(e.player.pauseVideo(),e.wrapper.CSSAnimate({opacity:0},2e3,function(){if(e.player.seekTo(r,!0),!e.isBackground){var t=e.videoData.thumbnail.hqDefault;jQuery(e).css({background:"rgba(0,0,0,0.5) url("+t+") center center",backgroundSize:"cover"})}})),jQuery(e).trigger("YTPEnd"))},1)},formatTime:function(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return(9>t?"0"+t:t)+" : "+(9>a?"0"+a:a)}},jQuery.fn.toggleVolume=function(){var e=this.get(0);if(e)return e.player.isMuted()?(jQuery(e).unmuteYTPVolume(),!0):(jQuery(e).muteYTPVolume(),!1)},jQuery.fn.optimizeDisplay=function(){var e=this.get(0),t=e.opt,a=jQuery(e.playerEl),r={},n=e.isBackground?jQuery(window):t.containment;r.width=n.width(),r.height=n.height();var i=24,o={};o.width=r.width+r.width*i/100,o.height=Math.ceil("16/9"==t.ratio?9*r.width/16:3*r.width/4),o.marginTop=-((o.height-r.height)/2),o.marginLeft=-(r.width*(i/2)/100),o.height<r.height&&(o.height=r.height+r.height*i/100,o.width=Math.floor("16/9"==t.ratio?16*r.height/9:4*r.height/3),o.marginTop=-(r.height*(i/2)/100),o.marginLeft=-((o.width-r.width)/2)),a.css({width:o.width,height:o.height,marginTop:o.marginTop,marginLeft:o.marginLeft})},jQuery.shuffle=function(e){for(var t=e.slice(),a=t.length,r=a;r--;){var n=parseInt(Math.random()*a),i=t[r];t[r]=t[n],t[n]=i}return t},jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.YTPlaylist,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildYTPControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.playYTP,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stopYTP,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pauseYTP,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekToYTP,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.muteYTPVolume,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmuteYTPVolume,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setYTPVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageYTPProgress}(jQuery,ytp);